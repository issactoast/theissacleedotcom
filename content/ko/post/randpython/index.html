---
authors:
- admin
date: "2020-03-26T00:00:00Z"
draft: false
featured: false
image:
  caption: ''
  focal_point: ""
  placement: 2
  preview_only: true
lastmod: "2020-03-26T00:00:00Z"
projects: [rpython]
subtitle: 'R과 Python의 애증의 관계'
summary: Python 3D array를 R로 변환 할 경우 주의점.
title: 'R과 Python의 행렬'
categories:
  - python
tags:
  - reticulate
---



<pre class="r"><code>library(reticulate)</code></pre>
<div id="r에서-array-정의-하기" class="section level2">
<h2>R에서 array 정의 하기</h2>
<p>3차원 array의 경우 R에서는 (행, 열, 쌓여있는 갯수) 이런식으로 정의가 됨.</p>
<pre class="r"><code># R
arr1 &lt;- array(1:24, c(3,4,2))
arr1
## , , 1
## 
##      [,1] [,2] [,3] [,4]
## [1,]    1    4    7   10
## [2,]    2    5    8   11
## [3,]    3    6    9   12
## 
## , , 2
## 
##      [,1] [,2] [,3] [,4]
## [1,]   13   16   19   22
## [2,]   14   17   20   23
## [3,]   15   18   21   24</code></pre>
<p>문제는 3 by 4 행렬의 원소를 채우는 방식을 가로방향으로 채우고 싶은 것. 이걸 행렬처럼 byrow로 정의하고 싶은데 R에는 그런 명령어가 없음 (아시는분 알려주세요). 그래서 다음과 같이 할 수 있음.</p>
<pre class="r"><code>arr2 &lt;- array(1:24, c(4, 3, 2))
arr2 &lt;- aperm(arr2, c(2, 1, 3))
arr2
## , , 1
## 
##      [,1] [,2] [,3] [,4]
## [1,]    1    2    3    4
## [2,]    5    6    7    8
## [3,]    9   10   11   12
## 
## , , 2
## 
##      [,1] [,2] [,3] [,4]
## [1,]   13   14   15   16
## [2,]   17   18   19   20
## [3,]   21   22   23   24</code></pre>
<div id="r에서-array를-python으로-보내기-미해결" class="section level3">
<h3>R에서 array를 Python으로 보내기 (미해결)</h3>
<p>여기서 문제는 이 arr2를 Python으로 보내고 싶은데, 그걸 또 어떻게 하는지 모르겠음. 아시는분 알려주세요.</p>
</div>
</div>
<div id="python에서-array-정의-하기" class="section level2">
<h2>Python에서 array 정의 하기</h2>
<p>Python의 array는 (쌓여있는 갯수, 행, 열) 이런식으로 정의가 됨.</p>
<pre class="python"><code># Python
import numpy as np

m1 = np.reshape(np.arange(1,25), (2, 4, 3), &quot;C&quot;)
m1
## array([[[ 1,  2,  3],
##         [ 4,  5,  6],
##         [ 7,  8,  9],
##         [10, 11, 12]],
## 
##        [[13, 14, 15],
##         [16, 17, 18],
##         [19, 20, 21],
##         [22, 23, 24]]])</code></pre>
<p>이걸 R로 불러오면 우리가 생각하는 array가 아님. <a href="https://rstudio.github.io/reticulate/articles/arrays.html">Index차이</a> 때문에 이렇게 됨.</p>
<pre class="r"><code>py$m1
## , , 1
## 
##      [,1] [,2] [,3] [,4]
## [1,]    1    4    7   10
## [2,]   13   16   19   22
## 
## , , 2
## 
##      [,1] [,2] [,3] [,4]
## [1,]    2    5    8   11
## [2,]   14   17   20   23
## 
## , , 3
## 
##      [,1] [,2] [,3] [,4]
## [1,]    3    6    9   12
## [2,]   15   18   21   24</code></pre>
<p>이걸 <code>aperm</code>을 이용해서 잘 바꿔주면, 원하는 행렬을 얻게 됨.</p>
<pre class="r"><code>m1 &lt;- aperm(py$m1, c(2, 3, 1))
m1
## , , 1
## 
##      [,1] [,2] [,3]
## [1,]    1    2    3
## [2,]    4    5    6
## [3,]    7    8    9
## [4,]   10   11   12
## 
## , , 2
## 
##      [,1] [,2] [,3]
## [1,]   13   14   15
## [2,]   16   17   18
## [3,]   19   20   21
## [4,]   22   23   24</code></pre>
</div>
